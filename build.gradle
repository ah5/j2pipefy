repositories {
    jcenter()
    mavenCentral()
}

apply plugin: 'base'
apply plugin: 'groovy'
apply plugin: 'war'

dependencies {
    compile 'org.codehaus.groovy:groovy-all:2.4.15'
}

sourceSets {
    main {
        groovy {
            srcDirs = ['src', 'vars']
        }
    }
}

groovydoc {
    dependsOn compileGroovy
    docTitle = description
    source = sourceSets.main.groovy
    destinationDir = new File('docs/web')
    classpath = configurations.compile
}

war {
    dependsOn groovydoc
    from 'docs/web'
    webInf {
        from 'docs/web/WEB-INF'
    }
    webXml = file('docs/web/WEB-INF/web.xml')
}

build.dependsOn war